<mxfile host="app.diagrams.net" modified="2021-07-01T05:35:13.808Z" agent="5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36" etag="xhxUF5vneICF4GtwVnmZ" version="14.8.3" type="github">
  <diagram id="7w6xEFenMqmiEfSMvMpZ" name="第 1 页">
    <mxGraphModel dx="1940" dy="719" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="EohFfbry857YQSvMEl9U-1" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="-360" y="60" width="40" height="130" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-2" value="&lt;b&gt;客户端消息队列&lt;/b&gt;&lt;br&gt;socket-center-client-msg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-410" y="30" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-3" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d0cee2;strokeColor=#56517e;" parent="1" vertex="1">
          <mxGeometry x="213.5" y="60" width="40" height="130" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-4" value="&lt;b&gt;业务服务端消息队列&lt;/b&gt;&lt;br&gt;socket-center-message-queue" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="163.5" y="30" width="166" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-5" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1410" y="60" width="40" height="130" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-6" value="&lt;b&gt;内部业务处理消息队列&lt;/b&gt;&lt;br&gt;socket-center-message-inner-queue" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1330" y="30" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-13" value="客户端消息队列：socket-center-client-msg" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="-820" y="255" width="740" height="855" as="geometry">
            <mxRectangle x="-820" y="255" width="270" height="20" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-14" value="登陆消息" style="swimlane;startSize=20;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-13" vertex="1">
          <mxGeometry y="20" width="510" height="835" as="geometry">
            <mxRectangle y="20" width="30" height="850" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-7" value="登陆消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="275" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-23" value="deviceInfo存在？" style="rhombus;whiteSpace=wrap;html=1;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="275" y="160" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-7" target="EohFfbry857YQSvMEl9U-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-25" value="deviceId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-24" vertex="1" connectable="0">
          <mxGeometry x="-0.0333" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-27" value="&lt;div style=&quot;&quot;&gt;&lt;span&gt;【save】deviceInfo&lt;/span&gt;&lt;/div&gt;&lt;span&gt;&lt;div style=&quot;&quot;&gt;&lt;span&gt;【save】deviceTag&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="375" y="285" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-23" target="EohFfbry857YQSvMEl9U-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-34" value="tag处理" style="swimlane;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="85" y="220" width="140" height="170" as="geometry">
            <mxRectangle x="85" y="260" width="70" height="23" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-29" value="【需要删除的tag】dbTags - clientTags" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-34" vertex="1">
          <mxGeometry x="10" y="30" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-30" value="【需要add的tag】clientTags - dbTags" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-34" vertex="1">
          <mxGeometry x="10" y="120" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-34" source="EohFfbry857YQSvMEl9U-29" target="EohFfbry857YQSvMEl9U-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-23" target="EohFfbry857YQSvMEl9U-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-36" target="iMkB06L4qrf0kSZZPwwf-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-36" value="代推送消息检查" style="swimlane;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="40" y="415" width="230" height="200" as="geometry">
            <mxRectangle x="40" y="490" width="120" height="23" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-36" source="EohFfbry857YQSvMEl9U-37" target="EohFfbry857YQSvMEl9U-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-45" value="routingKey" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-39" vertex="1" connectable="0">
          <mxGeometry x="-0.05" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-37" value="【代推送的队列】MsgOffset&lt;br&gt;条件:pushOffset !=&amp;nbsp;ackOffset" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-36" vertex="1">
          <mxGeometry y="50" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-38" value="【补推数据】DeviceMsg&lt;br&gt;偏移量: ackOffset &amp;lt; &lt;b&gt;seqId&lt;/b&gt; &amp;lt;= pushOffset" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-36" vertex="1">
          <mxGeometry y="130" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-34" target="EohFfbry857YQSvMEl9U-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-41" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="375" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-27" target="EohFfbry857YQSvMEl9U-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-14" source="iMkB06L4qrf0kSZZPwwf-1" target="EohFfbry857YQSvMEl9U-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-1" value="更新登陆时间" style="whiteSpace=wrap;html=1;fontStyle=1;align=left;verticalAlign=top;startSize=23;" vertex="1" parent="EohFfbry857YQSvMEl9U-14">
          <mxGeometry x="95" y="665" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-15" value="ack消息" style="swimlane;startSize=20;fillColor=#fff2cc;strokeColor=#d6b656;" parent="EohFfbry857YQSvMEl9U-13" vertex="1">
          <mxGeometry x="510" y="20" width="230" height="835" as="geometry">
            <mxRectangle x="540" y="20" width="30" height="850" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-8" value="ACK消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="EohFfbry857YQSvMEl9U-15" vertex="1">
          <mxGeometry x="50" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-48" value="【update】DeviceMsg.ack=1 where ack = 0&lt;br&gt;【update】MsgOffset.ackOffset where ackOffset &amp;gt; seqId" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-15" vertex="1">
          <mxGeometry x="20" y="160" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-15" source="EohFfbry857YQSvMEl9U-8" target="EohFfbry857YQSvMEl9U-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-50" value="seqId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-49" vertex="1" connectable="0">
          <mxGeometry x="-0.0667" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-51" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#fff2cc;strokeColor=#d6b656;" parent="EohFfbry857YQSvMEl9U-15" vertex="1">
          <mxGeometry x="50" y="265" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-15" source="EohFfbry857YQSvMEl9U-48" target="EohFfbry857YQSvMEl9U-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-18" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-1" target="EohFfbry857YQSvMEl9U-14" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-465" y="175" as="sourcePoint" />
            <mxPoint x="-425" y="185" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-450" y="175" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-20" value="0" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-18" vertex="1" connectable="0">
          <mxGeometry x="0.2072" y="-7" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-60" value="业务服务端消息队列：socket-center-message-queue" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="-26.5" y="255" width="440" height="750" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-61" value="向客户端推送消息" style="swimlane;startSize=20;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-60" vertex="1">
          <mxGeometry y="20" width="440" height="730" as="geometry">
            <mxRectangle x="-20" y="255" width="30" height="730" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-9" target="EohFfbry857YQSvMEl9U-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-9" value="向客户端推送的消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="159.75" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-66" target="EohFfbry857YQSvMEl9U-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-143" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-142" vertex="1" connectable="0">
          <mxGeometry x="-0.1111" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-66" value="业务有序消息？&lt;br&gt;routingKey存在" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="162.25" y="140" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-72" target="EohFfbry857YQSvMEl9U-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-72" value="UUID生成一个" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="162.25" y="250" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-75" value="【save】DeviceMsg" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="159.75" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-190" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-140" target="EohFfbry857YQSvMEl9U-144" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-191" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-140" target="EohFfbry857YQSvMEl9U-145" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-140" value="推送类型" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="159.75" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-141" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-75" target="EohFfbry857YQSvMEl9U-140" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-66" target="EohFfbry857YQSvMEl9U-75" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="152.25" y="270" as="targetPoint" />
            <Array as="points">
              <mxPoint x="112.25" y="170" />
              <mxPoint x="112.25" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-78" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-77" vertex="1" connectable="0">
          <mxGeometry x="-0.7176" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-157" value="tag" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-144" target="EohFfbry857YQSvMEl9U-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-144" value="根据tag推送" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="10" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-61" source="EohFfbry857YQSvMEl9U-145" target="EohFfbry857YQSvMEl9U-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-145" value="根据设备推送" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="306" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-156" value="【select】对应tag的所有设备" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="10" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-158" value="【select】对应设备" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-61" vertex="1">
          <mxGeometry x="306" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-79" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-3" target="EohFfbry857YQSvMEl9U-61" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="193.5" y="215" as="sourcePoint" />
            <mxPoint x="93.5" y="315" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-215" value="业务方自定义路由key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-79" vertex="1" connectable="0">
          <mxGeometry x="-0.2676" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-209" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-81" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1050" y="385" as="sourcePoint" />
            <mxPoint x="930" y="405" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1000" y="205" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-235" value="tag" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-209" vertex="1" connectable="0">
          <mxGeometry x="-0.1154" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-211" value="&lt;span style=&quot;font-size: 11px&quot;&gt;routingKey&lt;/span&gt;" style="curved=1;endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-82" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1530" y="315" as="sourcePoint" />
            <mxPoint x="1630" y="395" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-213" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-83" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1540" y="325" as="sourcePoint" />
            <mxPoint x="2470" y="355" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1800" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-214" value="routingKey" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-213" vertex="1" connectable="0">
          <mxGeometry x="-0.1998" y="-20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-80" value="内部业务处理消息队列：socket-center-message-inner-queue" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="430" y="255" width="2020" height="720" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-81" value="tag处理队列" style="swimlane;startSize=20;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry y="20" width="580" height="700" as="geometry">
            <mxRectangle y="20" width="30" height="460" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-216" value="TagProcessor：tag处理队列" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="17" y="30" width="500" height="470" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-217" value="客户端添加tag" style="swimlane;startSize=20;" parent="EohFfbry857YQSvMEl9U-216" vertex="1">
          <mxGeometry y="20" width="330" height="450" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-164" value="&lt;span&gt;客户端添加tag&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-217" vertex="1">
          <mxGeometry x="103" y="45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-220" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-217" source="EohFfbry857YQSvMEl9U-94" target="EohFfbry857YQSvMEl9U-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-222" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-220" vertex="1" connectable="0">
          <mxGeometry x="0.3409" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-221" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-217" source="EohFfbry857YQSvMEl9U-94" target="EohFfbry857YQSvMEl9U-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-223" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-221" vertex="1" connectable="0">
          <mxGeometry x="0.1957" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-94" value="DeviceTag存在" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-217" vertex="1">
          <mxGeometry x="103" y="155" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-167" value="tag" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-217" source="EohFfbry857YQSvMEl9U-164" target="EohFfbry857YQSvMEl9U-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-97" value="【insert】DeviceTag" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-217" vertex="1">
          <mxGeometry x="20" y="255" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-99" value="【update】DeviceTag" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-217" vertex="1">
          <mxGeometry x="190" y="255" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-116" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-217" vertex="1">
          <mxGeometry x="105" y="365" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-217" source="EohFfbry857YQSvMEl9U-99" target="EohFfbry857YQSvMEl9U-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-217" source="EohFfbry857YQSvMEl9U-97" target="EohFfbry857YQSvMEl9U-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-218" value="客户端删除tag" style="swimlane;startSize=20;" parent="EohFfbry857YQSvMEl9U-216" vertex="1">
          <mxGeometry x="330" y="20" width="170" height="450" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-89" value="【update/delete】DeviceTag" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-218" vertex="1">
          <mxGeometry x="23" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-90" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-218" vertex="1">
          <mxGeometry x="23" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-218" source="EohFfbry857YQSvMEl9U-89" target="EohFfbry857YQSvMEl9U-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-168" value="客户端删除tag" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-218" vertex="1">
          <mxGeometry x="23" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-170" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-218" source="EohFfbry857YQSvMEl9U-168" target="EohFfbry857YQSvMEl9U-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-82" value="消息处理队列" style="swimlane;startSize=20;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry x="580" y="20" width="910" height="700" as="geometry">
            <mxRectangle x="580" y="20" width="30" height="1249" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-224" value="MsgProcessor:消息处理队列" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-82" vertex="1">
          <mxGeometry x="20" y="30" width="865" height="660" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-225" value="单个客户端推送" style="swimlane;startSize=20;" parent="EohFfbry857YQSvMEl9U-224" vertex="1">
          <mxGeometry y="20" width="460" height="640" as="geometry">
            <mxRectangle y="20" width="30" height="640" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-160" value="&lt;span&gt;单个消息推送&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="28" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-231" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-125" target="EohFfbry857YQSvMEl9U-127" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-125" value="&lt;span&gt;MsgOffset存在？&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="28" y="145" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-163" value="routingKey" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-160" target="EohFfbry857YQSvMEl9U-125" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-132" value="消息是否ack？&lt;br&gt;pushOffset =&amp;nbsp;ackOffset" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="28" y="320" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-133" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-125" target="EohFfbry857YQSvMEl9U-132" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-233" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-133" vertex="1" connectable="0">
          <mxGeometry x="-0.0947" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-134" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="145" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-132" target="EohFfbry857YQSvMEl9U-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-136" value="N,存在未响应的消息" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-135" vertex="1" connectable="0">
          <mxGeometry x="0.0421" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-230" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-129" target="EohFfbry857YQSvMEl9U-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-129" value="调用推送接口" style="whiteSpace=wrap;html=1;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="225" y="330" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-132" target="EohFfbry857YQSvMEl9U-129" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-138" value="Y,当前&lt;br&gt;消息最新" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-137" vertex="1" connectable="0">
          <mxGeometry x="-0.15" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-232" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-127" target="EohFfbry857YQSvMEl9U-129" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-127" value="【insert】MsgOffset" style="whiteSpace=wrap;html=1;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="225" y="155" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-226" value="多客户端批量推送" style="swimlane;startSize=20;" parent="EohFfbry857YQSvMEl9U-224" vertex="1">
          <mxGeometry x="460" y="20" width="405" height="640" as="geometry">
            <mxRectangle x="460" y="20" width="30" height="640" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-171" value="消息批量推送" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-173" value="需要检查业务消息是否符合要求的队列&lt;br&gt;【select】DeviceMsg&lt;br&gt;1. = routingKey&amp;nbsp;&lt;br&gt;&lt;div&gt;&lt;span&gt;2. &amp;lt; seqId&lt;/span&gt;&lt;/div&gt;&lt;div&gt;对应的集合中存在比当前seqId新的数据&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="225" y="135" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-175" value="不符合立即推送，但能正常入库的消息。否则消息直接丢弃&lt;br&gt;【select】MsgOffset&lt;br&gt;过滤符合要求的数据&lt;br&gt;pushOffset &lt;span style=&quot;font-size: 10px&quot;&gt;&amp;lt; seqId&lt;/span&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="240" y="280" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-173" target="EohFfbry857YQSvMEl9U-175" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-192" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-179" target="EohFfbry857YQSvMEl9U-173" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-179" value="&lt;span style=&quot;font-weight: normal&quot;&gt;数据过滤&amp;amp;操作&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fontStyle=1" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-180" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-171" target="EohFfbry857YQSvMEl9U-179" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-182" value="不符合立即推送，但消息能正常入业务队列的集合，不做然和操作" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-179" target="EohFfbry857YQSvMEl9U-182" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-184" value="&lt;span&gt;1. 不符合立即推送，2. 消息benign能正常入业务队列的集合。&lt;br&gt;对业务方进行异常通知&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry y="370" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-182" target="EohFfbry857YQSvMEl9U-184" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-186" value="&lt;span&gt;符合推送要求的客户端进行批量推送&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-187" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-184" target="EohFfbry857YQSvMEl9U-186" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-188" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-186" target="EohFfbry857YQSvMEl9U-188" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-83" value="消息check处理队列" style="swimlane;startSize=20;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry x="1490" y="20" width="530" height="700" as="geometry">
            <mxRectangle x="1490" y="20" width="30" height="1249" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-12" target="EohFfbry857YQSvMEl9U-194" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-196" value="routingKey &amp;amp; seqId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-195" vertex="1" connectable="0">
          <mxGeometry x="-0.2" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-12" value="MsgCheckProcessor&lt;br&gt;消息check处理队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-194" value="【select】不加deleted判断" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-197" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-204" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-200" vertex="1" connectable="0">
          <mxGeometry x="-0.1535" y="1" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-197" value="是否ack?" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="32.5" y="290" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-198" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-194" target="EohFfbry857YQSvMEl9U-197" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-199" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="280" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-201" value="是否deleted？" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="32.5" y="420" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-202" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-197" target="EohFfbry857YQSvMEl9U-201" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-203" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-201" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-205" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-203" vertex="1" connectable="0">
          <mxGeometry x="-0.7297" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-234" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-206" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-206" value="【业务预警】客户端可能消费未消费" style="whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="520" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-207" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-201" target="EohFfbry857YQSvMEl9U-206" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-19" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-1" target="EohFfbry857YQSvMEl9U-15" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-130" y="115" as="sourcePoint" />
            <mxPoint x="-135" y="175" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-220" y="175" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-21" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-19" vertex="1" connectable="0">
          <mxGeometry x="0.1687" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
