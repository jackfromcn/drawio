<mxfile host="app.diagrams.net" modified="2021-07-01T06:17:12.944Z" agent="5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36" etag="BKYHiN3ljVNXSFzqK_wN" version="14.8.3" type="github">
  <diagram id="7w6xEFenMqmiEfSMvMpZ" name="第 1 页">
    <mxGraphModel dx="1940" dy="595" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="EohFfbry857YQSvMEl9U-1" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="-360" y="60" width="40" height="130" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-2" value="&lt;b&gt;业务服务端消息队列&lt;/b&gt;&lt;br&gt;socket-center-message-queue" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-425" y="30" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-5" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1410" y="60" width="40" height="130" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-6" value="&lt;b&gt;内部业务处理消息队列&lt;/b&gt;&lt;br&gt;socket-center-message-inner-queue" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1330" y="30" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-13" value="业务服务端消息队列：socket-center-message-queue" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="-820" y="255" width="1260" height="770" as="geometry">
            <mxRectangle x="-820" y="255" width="270" height="20" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-14" value="登陆消息" style="swimlane;startSize=20;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-13" vertex="1">
          <mxGeometry y="20" width="510" height="750" as="geometry">
            <mxRectangle y="20" width="30" height="850" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-7" value="登陆消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="275" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-23" value="deviceInfo存在？" style="rhombus;whiteSpace=wrap;html=1;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="275" y="160" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-7" target="EohFfbry857YQSvMEl9U-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-25" value="deviceId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-24" vertex="1" connectable="0">
          <mxGeometry x="-0.0333" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-27" value="&lt;div style=&quot;&quot;&gt;&lt;span&gt;【save】deviceInfo&lt;/span&gt;&lt;/div&gt;&lt;span&gt;&lt;div style=&quot;&quot;&gt;&lt;span&gt;【save】deviceTag&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="375" y="285" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-23" target="EohFfbry857YQSvMEl9U-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-34" value="tag处理" style="swimlane;align=left;verticalAlign=top;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="85" y="220" width="140" height="170" as="geometry">
            <mxRectangle x="85" y="260" width="70" height="23" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-29" value="【需要删除的tag】dbTags - clientTags" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-34" vertex="1">
          <mxGeometry x="10" y="30" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-30" value="【需要add的tag】clientTags - dbTags" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-34" vertex="1">
          <mxGeometry x="10" y="120" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-34" source="EohFfbry857YQSvMEl9U-29" target="EohFfbry857YQSvMEl9U-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-23" target="EohFfbry857YQSvMEl9U-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-36" target="iMkB06L4qrf0kSZZPwwf-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-36" value="代推送消息检查" style="swimlane;align=left;verticalAlign=top;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="40" y="415" width="230" height="200" as="geometry">
            <mxRectangle x="40" y="490" width="120" height="23" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-36" source="EohFfbry857YQSvMEl9U-37" target="EohFfbry857YQSvMEl9U-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-45" value="routingKey" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-39" vertex="1" connectable="0">
          <mxGeometry x="-0.05" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-37" value="【代推送的队列】MsgOffset&lt;br&gt;条件:pushOffset !=&amp;nbsp;ackOffset" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-36" vertex="1">
          <mxGeometry y="50" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-38" value="【补推数据】DeviceMsg&lt;br&gt;偏移量: ackOffset &amp;lt; &lt;b&gt;seqId&lt;/b&gt; &amp;lt;= pushOffset" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-36" vertex="1">
          <mxGeometry y="130" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-34" target="EohFfbry857YQSvMEl9U-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-41" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-14" vertex="1">
          <mxGeometry x="375" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-14" source="EohFfbry857YQSvMEl9U-27" target="EohFfbry857YQSvMEl9U-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-14" source="iMkB06L4qrf0kSZZPwwf-1" target="EohFfbry857YQSvMEl9U-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-1" value="更新登陆时间" style="whiteSpace=wrap;html=1;fontStyle=1;align=center;verticalAlign=middle;startSize=23;" vertex="1" parent="EohFfbry857YQSvMEl9U-14">
          <mxGeometry x="95" y="665" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-15" value="ack消息" style="swimlane;startSize=20;fillColor=#fff2cc;strokeColor=#d6b656;" parent="EohFfbry857YQSvMEl9U-13" vertex="1">
          <mxGeometry x="510" y="20" width="390" height="750" as="geometry">
            <mxRectangle x="540" y="20" width="30" height="850" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-8" value="ACK消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="EohFfbry857YQSvMEl9U-15" vertex="1">
          <mxGeometry x="50" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-15" source="EohFfbry857YQSvMEl9U-48" target="iMkB06L4qrf0kSZZPwwf-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-48" value="【update】DeviceMsg.ack=1 where ack = 0&lt;br&gt;【update】MsgOffset.ackOffset where ackOffset &amp;gt; seqId" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-15" vertex="1">
          <mxGeometry x="20" y="160" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-15" source="EohFfbry857YQSvMEl9U-8" target="EohFfbry857YQSvMEl9U-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-50" value="seqId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-49" vertex="1" connectable="0">
          <mxGeometry x="-0.0667" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-15" source="iMkB06L4qrf0kSZZPwwf-26" target="iMkB06L4qrf0kSZZPwwf-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-15" source="iMkB06L4qrf0kSZZPwwf-26" target="iMkB06L4qrf0kSZZPwwf-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-26" value="commitSeqId &amp;lt;&amp;nbsp;pushOffset？&lt;br&gt;带消费的消息未消费完" style="rhombus;whiteSpace=wrap;html=1;rounded=0;align=center;" vertex="1" parent="EohFfbry857YQSvMEl9U-15">
          <mxGeometry x="25" y="290" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-29" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="EohFfbry857YQSvMEl9U-15">
          <mxGeometry x="260" y="295" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-15" source="iMkB06L4qrf0kSZZPwwf-31" target="iMkB06L4qrf0kSZZPwwf-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-31" value="【select】device_msg.seqId &amp;gt; commitSeqId&lt;br&gt;所有队列中带消费的消息" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="EohFfbry857YQSvMEl9U-15">
          <mxGeometry x="30" y="425" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-15" source="iMkB06L4qrf0kSZZPwwf-33" target="iMkB06L4qrf0kSZZPwwf-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-33" value="【inner-queue】尝试推送" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#e51400;strokeColor=#B20000;fontColor=#ffffff;" vertex="1" parent="EohFfbry857YQSvMEl9U-15">
          <mxGeometry x="50" y="555" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-6" value="向客户端推送消息" style="swimlane;startSize=20;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="EohFfbry857YQSvMEl9U-13">
          <mxGeometry x="900" y="20" width="360" height="750" as="geometry">
            <mxRectangle x="540" y="20" width="30" height="850" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-9" value="向客户端推送的消息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="iMkB06L4qrf0kSZZPwwf-6" vertex="1">
          <mxGeometry x="50" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="iMkB06L4qrf0kSZZPwwf-6" source="EohFfbry857YQSvMEl9U-66" target="EohFfbry857YQSvMEl9U-72">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-22" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="iMkB06L4qrf0kSZZPwwf-21">
          <mxGeometry x="-0.2101" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="iMkB06L4qrf0kSZZPwwf-6" source="EohFfbry857YQSvMEl9U-66" target="EohFfbry857YQSvMEl9U-144">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-25" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="iMkB06L4qrf0kSZZPwwf-24">
          <mxGeometry x="-0.1373" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-66" value="业务有序消息？&lt;br&gt;routingKey存在" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="iMkB06L4qrf0kSZZPwwf-6" vertex="1">
          <mxGeometry x="52.5" y="135" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="iMkB06L4qrf0kSZZPwwf-6" source="EohFfbry857YQSvMEl9U-9" target="EohFfbry857YQSvMEl9U-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="iMkB06L4qrf0kSZZPwwf-6" source="EohFfbry857YQSvMEl9U-72" target="EohFfbry857YQSvMEl9U-144">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-72" value="UUID生成一个" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="iMkB06L4qrf0kSZZPwwf-6" vertex="1">
          <mxGeometry x="220" y="135" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="iMkB06L4qrf0kSZZPwwf-6" source="EohFfbry857YQSvMEl9U-144" target="iMkB06L4qrf0kSZZPwwf-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-144" value="根据tag推送" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#fa6800;strokeColor=#C73500;fontColor=#000000;" parent="iMkB06L4qrf0kSZZPwwf-6" vertex="1">
          <mxGeometry x="50" y="249" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-36" value="结束" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="iMkB06L4qrf0kSZZPwwf-6">
          <mxGeometry x="50" y="355" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-18" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-1" target="EohFfbry857YQSvMEl9U-14" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-465" y="175" as="sourcePoint" />
            <mxPoint x="-425" y="185" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-480" y="210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-20" value="1000" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-18" vertex="1" connectable="0">
          <mxGeometry x="0.2072" y="-7" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-79" value="" style="curved=1;endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="iMkB06L4qrf0kSZZPwwf-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-340" y="190" as="sourcePoint" />
            <mxPoint x="93.5" y="315" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-110" y="180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-215" value="1, 业务方自定义路由key" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-79" vertex="1" connectable="0">
          <mxGeometry x="-0.2676" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-80" value="内部业务处理消息队列：socket-center-message-inner-queue" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="450" y="255" width="1820" height="720" as="geometry">
            <mxRectangle x="430" y="255" width="370" height="20" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-81" value="tag处理队列" style="swimlane;startSize=20;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry y="20" width="380" height="700" as="geometry">
            <mxRectangle y="20" width="30" height="460" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-164" value="&lt;span&gt;客户端添加/删除tag&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="120" y="35" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-167" value="tag" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-81" source="EohFfbry857YQSvMEl9U-164" target="EohFfbry857YQSvMEl9U-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-94" value="DeviceTag存在" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="120" y="145" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-221" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-81" source="EohFfbry857YQSvMEl9U-94" target="EohFfbry857YQSvMEl9U-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-223" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-221" vertex="1" connectable="0">
          <mxGeometry x="0.1957" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-99" value="【update】DeviceTag" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="230" y="249" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-81" source="EohFfbry857YQSvMEl9U-99" target="EohFfbry857YQSvMEl9U-116" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="290" y="345" />
              <mxPoint x="180" y="345" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-116" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="120" y="385" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-97" value="【insert】DeviceTag" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-81" vertex="1">
          <mxGeometry x="10" y="245" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-81" source="EohFfbry857YQSvMEl9U-97" target="EohFfbry857YQSvMEl9U-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-220" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="EohFfbry857YQSvMEl9U-81" source="EohFfbry857YQSvMEl9U-94" target="EohFfbry857YQSvMEl9U-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-222" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-220" vertex="1" connectable="0">
          <mxGeometry x="0.3409" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-82" value="消息处理队列" style="swimlane;startSize=20;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry x="380" y="20" width="910" height="700" as="geometry">
            <mxRectangle x="580" y="20" width="30" height="1249" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-224" value="MsgProcessor:消息处理队列" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-82" vertex="1">
          <mxGeometry x="20" y="30" width="865" height="660" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-225" value="单个客户端推送" style="swimlane;startSize=20;fillColor=#e51400;strokeColor=#B20000;fontColor=#ffffff;" parent="EohFfbry857YQSvMEl9U-224" vertex="1">
          <mxGeometry y="20" width="460" height="640" as="geometry">
            <mxRectangle y="20" width="30" height="640" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-160" value="&lt;span&gt;单个消息推送&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="28" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-125" target="iMkB06L4qrf0kSZZPwwf-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-47" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="iMkB06L4qrf0kSZZPwwf-40">
          <mxGeometry x="-0.2908" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-125" target="iMkB06L4qrf0kSZZPwwf-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-125" value="设备在线?" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-225" vertex="1">
          <mxGeometry x="28" y="145" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-163" value="routingKey" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-225" source="EohFfbry857YQSvMEl9U-160" target="EohFfbry857YQSvMEl9U-125" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-39" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#ffcccc;strokeColor=#36393d;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="220" y="155" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-41" target="iMkB06L4qrf0kSZZPwwf-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-41" value="msg中的范围与MsgOffset范围检查并合并" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="28" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-44" target="iMkB06L4qrf0kSZZPwwf-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-48" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="iMkB06L4qrf0kSZZPwwf-46">
          <mxGeometry x="-0.6222" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-44" target="iMkB06L4qrf0kSZZPwwf-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-44" value="范围正常?" style="rhombus;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="28" y="365" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-49" target="iMkB06L4qrf0kSZZPwwf-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-49" value="【update】msg_offset.pushOffset" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="28" y="485" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-51" target="iMkB06L4qrf0kSZZPwwf-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-51" value="【inner-queue】check消息" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="29" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="EohFfbry857YQSvMEl9U-225" source="iMkB06L4qrf0kSZZPwwf-53" target="iMkB06L4qrf0kSZZPwwf-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-53" value="【spi】网关接口推送" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" vertex="1" parent="EohFfbry857YQSvMEl9U-225">
          <mxGeometry x="310" y="485" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-226" value="多客户端批量推送" style="swimlane;startSize=20;fillColor=#fa6800;strokeColor=#C73500;fontColor=#000000;" parent="EohFfbry857YQSvMEl9U-224" vertex="1">
          <mxGeometry x="460" y="20" width="405" height="640" as="geometry">
            <mxRectangle x="460" y="20" width="30" height="640" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-171" value="消息批量推送" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-173" value="需要检查业务消息是否符合要求的队列&lt;br&gt;【select】DeviceMsg&lt;br&gt;1. = routingKey&amp;nbsp;&lt;br&gt;&lt;div&gt;&lt;span&gt;2. &amp;lt; seqId&lt;/span&gt;&lt;/div&gt;&lt;div&gt;对应的集合中存在比当前seqId新的数据&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="225" y="135" width="180" height="110" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-175" value="不符合立即推送，但能正常入库的消息。否则消息直接丢弃&lt;br&gt;【select】MsgOffset&lt;br&gt;过滤符合要求的数据&lt;br&gt;pushOffset &lt;span style=&quot;font-size: 10px&quot;&gt;&amp;lt; seqId&lt;/span&gt;" style="whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="240" y="280" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-173" target="EohFfbry857YQSvMEl9U-175" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-192" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-179" target="EohFfbry857YQSvMEl9U-173" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-179" value="&lt;span style=&quot;font-weight: normal&quot;&gt;数据过滤&amp;amp;操作&lt;/span&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;align=center;verticalAlign=middle;fontStyle=1" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-180" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-171" target="EohFfbry857YQSvMEl9U-179" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-182" value="【insert】符合入队列要求的设备，消息落库" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-179" target="EohFfbry857YQSvMEl9U-182" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-184" value="&lt;span&gt;1. 不符合立即推送，2. 消息能正常入业务队列的集合。&lt;br&gt;对业务方进行异常通知&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry y="370" width="130" height="70" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-182" target="EohFfbry857YQSvMEl9U-184" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-186" value="&lt;span&gt;符合推送要求的客户端进行批量推送&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-187" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-184" target="EohFfbry857YQSvMEl9U-186" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-188" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;" parent="EohFfbry857YQSvMEl9U-226" vertex="1">
          <mxGeometry x="5" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-226" source="EohFfbry857YQSvMEl9U-186" target="EohFfbry857YQSvMEl9U-188" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-83" value="消息check处理队列" style="swimlane;startSize=20;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-80" vertex="1">
          <mxGeometry x="1290" y="20" width="530" height="700" as="geometry">
            <mxRectangle x="1490" y="20" width="30" height="1249" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-12" target="EohFfbry857YQSvMEl9U-194" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-196" value="routingKey &amp;amp; seqId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-195" vertex="1" connectable="0">
          <mxGeometry x="-0.2" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-12" value="MsgCheckProcessor&lt;br&gt;消息check处理队列" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-194" value="【select】不加deleted判断" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-197" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-204" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-200" vertex="1" connectable="0">
          <mxGeometry x="-0.1535" y="1" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-197" value="是否ack?" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="32.5" y="290" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-198" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-194" target="EohFfbry857YQSvMEl9U-197" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-199" value="结束" style="rounded=1;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="280" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-201" value="是否deleted？" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="32.5" y="420" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-202" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-197" target="EohFfbry857YQSvMEl9U-201" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-203" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-201" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-205" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-203" vertex="1" connectable="0">
          <mxGeometry x="-0.7297" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-234" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-206" target="EohFfbry857YQSvMEl9U-199" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-206" value="【业务预警】客户端可能消费未消费" style="whiteSpace=wrap;html=1;rounded=0;" parent="EohFfbry857YQSvMEl9U-83" vertex="1">
          <mxGeometry x="20" y="520" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-207" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="EohFfbry857YQSvMEl9U-83" source="EohFfbry857YQSvMEl9U-201" target="EohFfbry857YQSvMEl9U-206" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iMkB06L4qrf0kSZZPwwf-19" value="1001" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="EohFfbry857YQSvMEl9U-15">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-340" y="190" as="sourcePoint" />
            <mxPoint x="-320" y="230" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-340" y="190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-209" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-81" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1050" y="385" as="sourcePoint" />
            <mxPoint x="930" y="405" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1000" y="205" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-235" value="tag" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-209" vertex="1" connectable="0">
          <mxGeometry x="-0.1154" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-211" value="&lt;span style=&quot;font-size: 11px&quot;&gt;routingKey&lt;/span&gt;" style="curved=1;endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-82" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1530" y="315" as="sourcePoint" />
            <mxPoint x="1630" y="395" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-213" value="" style="curved=1;endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="EohFfbry857YQSvMEl9U-5" target="EohFfbry857YQSvMEl9U-83" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1540" y="325" as="sourcePoint" />
            <mxPoint x="2470" y="355" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1800" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="EohFfbry857YQSvMEl9U-214" value="routingKey" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="EohFfbry857YQSvMEl9U-213" vertex="1" connectable="0">
          <mxGeometry x="-0.1998" y="-20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
